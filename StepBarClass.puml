@startuml
!theme blueprint
left to right direction

class StepBar <<component>> {
  + isFormFilling
  + isEdbEditing
  + isEdbApproval
  + isEditing
  + isSigning
  + isApprovalStep
  + hasBackButton
  + hasEditButton
  + hasExitEditButton
  + hasSubmitEditButton
  + hasApproveButton
  + hasReturnButton
  '
  --props--
  # onBack
  # onClear
  # onNext
  # onSubmit: function
  # disableSave: Boolean
  # finalSubmitStep: Boolean
  # requiredLogin: Boolean
  '
  --state--
  ~ exitEditPopup
  ~ savePopup
  ~ saveSuccessPopup
  ~ saveFailPopup
  ~ open
  ~ openSubmittedDialog
  ~ form017OpenSubmittedDialog
  ~ openApprovalDialog
  ~ openLogin
  ~ action
  ~ subFilPopop
  ~ multiSubmitPopup
  '
  --method--
  - handleSaveConfirm()
  - handleNextAction()
  - onSign()
  - onSaveConfirm()
  - onFormSubmit()
  - onFormEdit()
  - onFormApproval()
  - onSign()
  - onDownload()
}



' === Button ===
class PreviewPDF <<Button>> {
    --props--
    # onClick: onDownload() /\nsubFileDownload()
}
class CancelEdit <<Button>> {
    --props--
    # onClick: setExitPopup(true)
}
class Back <<Button>> {
    --props--
    # onClick: onBack(), scrollToTop()
}
class Save <<Button>> {
    --props--
    # onClick: setSavePopup(true)
}
class Next <<Button>> {}
class Submig <<Button>> {}
class Edit <<Button>> {}
class Reply <<Button>> {}
class Reject <<Button>> {}
class Approval <<Button>> {}
class SignButton <<Button>> {
--props--
# onClick: setOpen(true)
}
class Receive <<Button>> {}


' === Dialog ===
class SigningDialog <<component>> {
    --props--
    # formOpen: open
    # uploadFirst: !isApplicantSigning
    # onSign: onSign()
}
class ExitEdit <<AlertDialog>> {
    --props--
    # closeButton: handleExitClose()
    # confirmButton: handleExitConfirm()
}
class SaveDialog <<AlertDialog>> {
    --props--
    # closeButton: handleSaveClose()
    # confirmButton: handleSaveConfirm()
}


' === Button display logic ===
StepBar o-- PreviewPDF :isApprovalStep
StepBar o-- CancelEdit :hasExitEditButton
StepBar o-- Back :hasBackButton
StepBar o-- Save :disableSave &&\nisFormFilling &&\nisEmpty(initialStep)
StepBar o-- Next :isFunction(onNext) &&\nisFunction(handleSubmit) &&\nisFunction(onError)
StepBar o-- Submit :finalSubmitStep &&\nisFormFilling &&\n!isApprovalStep
StepBar o-- Edit :hasEditButton &&\nisNotEmpty(initialStep)
StepBar o-- Reply :hasReturnButton
StepBar o-- Reject :hasReturnButton
StepBar o-- Approval :isEdbApproval
StepBar o-- SignButton :isSigning :isSigning
StepBar o-- Receive :hasApproveButton ||\nhasSubmitEditButton


' === Dialog display logic ===
SignButton o-- SigningDialog 
CancelEdit o-- ExitEdit :exitPopup
Save o-- SaveDialog :savePopup

@enduml
